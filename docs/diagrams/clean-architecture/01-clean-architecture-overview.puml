@startuml Clean Architecture Overview
!include ../_style-common.puml

title Clean Architecture - High Level Overview

' Concentric circles representing layers
package "Enterprise Business Rules\n(Core Layer)" <<Cloud>> #3498db {
  [Entities]
  [Business Logic]
}

package "Application Business Rules\n(Use Cases)" <<Cloud>> #3498db {
  [User Use Cases]
  [GitHub Use Cases]
  [Container Use Cases]
  [Deployment Use Cases]
}

package "Interface Adapters\n(API Layer)" <<Cloud>> #f39c12 {
  [Controllers]
  [Routes]
  [Middleware]
  [DTOs]
}

package "Frameworks & Drivers\n(Infrastructure)" <<Cloud>> #2ecc71 {
  [Durable Objects]
  [External Services]
  [Cloudflare Workers]
  [GitHub API]
  [Anthropic API]
}

' Dependencies flow inward
[Frameworks & Drivers\n(Infrastructure)] ..> [Interface Adapters\n(API Layer)] : implements
[Interface Adapters\n(API Layer)] ..> [Application Business Rules\n(Use Cases)] : calls
[Application Business Rules\n(Use Cases)] ..> [Enterprise Business Rules\n(Core Layer)] : uses

note right of [Enterprise Business Rules\n(Core Layer)]
  **No Dependencies**
  - Pure TypeScript
  - Business entities
  - Domain rules
  - Framework agnostic
end note

note right of [Application Business Rules\n(Use Cases)]
  **Depends only on Core**
  - Orchestration logic
  - Use case implementations
  - Interface definitions
  - Application rules
end note

note right of [Interface Adapters\n(API Layer)]
  **Depends on Use Cases**
  - HTTP request handling
  - Input validation
  - Response formatting
  - Authentication
end note

note right of [Frameworks & Drivers\n(Infrastructure)]
  **Implements Interfaces**
  - Cloudflare-specific code
  - Database access (DO)
  - External API calls
  - Framework code
end note

note as N1
  **Dependency Rule:**
  Source code dependencies must point
  **INWARD** toward higher-level policies.
  
  Inner circles know nothing about
  outer circles.
end note

@enduml
