{
  "$schema": "node_modules/wrangler/config-schema.json",
  // 
  // Wrangler Configuration Template
  // Copy this file to wrangler.jsonc and customize for your deployment
  //

  // Change this to your preferred worker name
  "name": "your-claude-code-containers",
  
  "main": "src/index.ts",
  "compatibility_date": "2025-05-23",
  "compatibility_flags": ["nodejs_compat"],
  
  // Enable observability for monitoring and debugging
  "observability": {
    "enabled": true
  },

  // Container configuration for Claude Code processing
  "containers": [
    {
      "class_name": "MyContainer",
      "image": "./Dockerfile",
      // Adjust max_instances based on expected load (1-100)
      "max_instances": 10
    }
  ],

  // Durable Objects for persistent state and credentials
  "durable_objects": {
    "bindings": [
      {
        "class_name": "MyContainer",
        "name": "MY_CONTAINER"
      },
      {
        "class_name": "GitHubAppConfigDO", 
        "name": "GITHUB_APP_CONFIG"
      },
      {
        "class_name": "UserConfigDO",
        "name": "USER_CONFIG"
      }
    ]
  },

  // Database migrations for Durable Objects
  "migrations": [
    {
      "new_sqlite_classes": ["MyContainer", "GitHubAppConfigDO"],
      "tag": "v1"
    },
    {
      "new_sqlite_classes": ["UserConfigDO"], 
      "tag": "v2"
    }
  ],

  // Default environment variables
  "vars": {
    "ENVIRONMENT": "production",
    "ENABLE_DEEP_REASONING": "false"
  },

  // Environment-specific configurations
  "env": {
    "development": {
      "name": "your-claude-code-containers-dev",
      "vars": {
        "ENVIRONMENT": "development",
        "ENABLE_DEEP_REASONING": "false"
      },
      "containers": [
        {
          "class_name": "MyContainer",
          "image": "./Dockerfile",
          "max_instances": 5
        }
      ]
    },
    
    "staging": {
      "name": "your-claude-code-containers-staging", 
      "vars": {
        "ENVIRONMENT": "staging",
        "ENABLE_DEEP_REASONING": "false"
      },
      "containers": [
        {
          "class_name": "MyContainer",
          "image": "./Dockerfile",
          "max_instances": 10
        }
      ]
    },

    "production": {
      "name": "your-claude-code-containers-prod",
      "vars": {
        "ENVIRONMENT": "production",
        "ENABLE_DEEP_REASONING": "false"
      },
      "containers": [
        {
          "class_name": "MyContainer", 
          "image": "./Dockerfile",
          // Increase for production load
          "max_instances": 25
        }
      ]
    }
  }

  // Notes:
  // 1. Change "your-claude-code-containers" to your preferred name
  // 2. Adjust max_instances based on expected usage
  // 3. Set ENABLE_DEEP_REASONING=true if you need advanced analysis (costs more)
  // 4. Use different environments for development, staging, and production
  // 5. Deploy with: wrangler deploy --env production
}